
  <!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<script>

    var requirejs,require,define;!function(e){function n(e,n){return m.call(e,n)}function r(e,n){var r,i,t,o,u,f,l,c,s,p,a,d=n&&n.split("/"),h=g.map,m=h&&h["*"]||{};if(e){for(u=(e=e.split("/")).length-1,g.nodeIdCompat&&y.test(e[u])&&(e[u]=e[u].replace(y,"")),"."===e[0].charAt(0)&&d&&(e=d.slice(0,d.length-1).concat(e)),s=0;s<e.length;s++)if("."===(a=e[s]))e.splice(s,1),s-=1;else if(".."===a){if(0===s||1===s&&".."===e[2]||".."===e[s-1])continue;s>0&&(e.splice(s-1,2),s-=2)}e=e.join("/")}if((d||m)&&h){for(s=(r=e.split("/")).length;s>0;s-=1){if(i=r.slice(0,s).join("/"),d)for(p=d.length;p>0;p-=1)if((t=h[d.slice(0,p).join("/")])&&(t=t[i])){o=t,f=s;break}if(o)break;!l&&m&&m[i]&&(l=m[i],c=s)}!o&&l&&(o=l,f=c),o&&(r.splice(0,f,o),e=r.join("/"))}return e}function i(n,r){return function(){var i=v.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),c.apply(e,i.concat([n,r]))}}function t(e){return function(n){a[e]=n}}function o(r){if(n(d,r)){var i=d[r];delete d[r],h[r]=!0,l.apply(e,i)}if(!n(a,r)&&!n(h,r))throw new Error("No "+r);return a[r]}function u(e){var n,r=e?e.indexOf("!"):-1;return r>-1&&(n=e.substring(0,r),e=e.substring(r+1,e.length)),[n,e]}function f(e){return e?u(e):[]}var l,c,s,p,a={},d={},g={},h={},m=Object.prototype.hasOwnProperty,v=[].slice,y=/.js$/;s=function(e,n){var i,t=u(e),f=t[0],l=n[1];return e=t[1],f&&(i=o(f=r(f,l))),f?e=i&&i.normalize?i.normalize(e,function(e){return function(n){return r(n,e)}}(l)):r(e,l):(f=(t=u(e=r(e,l)))[0],e=t[1],f&&(i=o(f))),{f:f?f+"!"+e:e,n:e,pr:f,p:i}},p={require:function(e){return i(e)},exports:function(e){var n=a[e];return void 0!==n?n:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:function(e){return function(){return g&&g.config&&g.config[e]||{}}}(e)}}},l=function(r,u,l,c){var g,m,v,y,j,q,x,b=[],w=typeof l;if(c=c||r,q=f(c),"undefined"===w||"function"===w){for(u=!u.length&&l.length?["require","exports","module"]:u,j=0;j<u.length;j+=1)if(y=s(u[j],q),"require"===(m=y.f))b[j]=p.require(r);else if("exports"===m)b[j]=p.exports(r),x=!0;else if("module"===m)g=b[j]=p.module(r);else if(n(a,m)||n(d,m)||n(h,m))b[j]=o(m);else{if(!y.p)throw new Error(r+" missing "+m);y.p.load(y.n,i(c,!0),t(m),{}),b[j]=a[m]}v=l?l.apply(a[r],b):void 0,r&&(g&&g.exports!==e&&g.exports!==a[r]?a[r]=g.exports:v===e&&x||(a[r]=v))}else r&&(a[r]=l)},requirejs=require=c=function(n,r,i,t,u){if("string"==typeof n)return p[n]?p[n](r):o(s(n,f(r)).f);if(!n.splice){if((g=n).deps&&c(g.deps,g.callback),!r)return;r.splice?(n=r,r=i,i=null):n=e}return r=r||function(){},"function"==typeof i&&(i=t,t=u),t?l(e,n,r,i):setTimeout(function(){l(e,n,r,i)},4),c},c.config=function(e){return c(e)},requirejs._defined=a,(define=function(e,r,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");r.splice||(i=r,r=[]),n(a,e)||n(d,e)||(d[e]=[e,r,i])}).amd={jQuery:!0}}();


var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
define("createElement", ["require", "exports", "elementImpl"], function (require, exports, elementImpl_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var throwOnUnrecognized = false;
    function debug(err) {
        if (throwOnUnrecognized) {
            throw err;
        }
        else {
            console.error(err);
        }
    }
    var Module = {
        createElement: function (tag, attrs) {
            if (attrs === void 0) { attrs = {}; }
            var children = [];
            for (var _i = 2; _i < arguments.length; _i++) {
                children[_i - 2] = arguments[_i];
            }
            var element;
            if (typeof tag === 'string') {
                element = new elementImpl_1.ElementLikeImpl(tag);
            }
            else {
                if (elementImpl_1.isReactLikeComponent(tag)) {
                    element = new tag(__assign({}, attrs, { children: children })).render();
                }
                else {
                    element = tag(__assign({}, attrs, { children: children }));
                }
                attrs = {};
            }
            for (var name_1 in attrs) {
                if (name_1 && attrs.hasOwnProperty(name_1)) {
                    var value = attrs[name_1];
                    if (typeof value === 'boolean') {
                        if (value === true) {
                            element.setAttribute(name_1, name_1);
                        }
                    }
                    else if (typeof value === 'function') {
                        var code = "(" + value.toString() + ").apply(this, arguments)";
                        var escaped = code.replace(/\"/gmi, '&quot;');
                        element.setAttribute(name_1, escaped);
                    }
                    else if (value !== false && value != null) {
                        if (name_1 === 'className') {
                            if (typeof value === 'string') {
                                element.setAttribute('class', value);
                            }
                            else if (Array.isArray(value) && value.length && typeof value[0] === 'string') {
                                element.setAttribute('class', value.join(' '));
                            }
                            else {
                                debug("unrecognized className value " + typeof value + " " + value);
                            }
                        }
                        else {
                            element.setAttribute(name_1, value.toString());
                        }
                    }
                    else if (typeof value === 'object') {
                        if (name_1 === 'style') {
                            element.setAttribute('style', "" + Object.keys(value).map(function (p) { return p + ": " + value[p]; }).join('; '));
                        }
                        else if (name_1 === 'dangerouslySetInnerHTML' && value && typeof value.__html === 'string') {
                            element.dangerouslySetInnerHTML(value.__html);
                        }
                        else {
                            debug("unrecognized object attribute \"" + name_1 + "\" - the only object attribute supported is \"style\"");
                        }
                    }
                    else {
                        debug("unrecognized attribute \"" + name_1 + "\" with type " + typeof value);
                    }
                }
            }
            children.filter(function (c) { return c; }).forEach(function (child) {
                if (elementImpl_1.isNode(child)) {
                    element.appendChild(child);
                }
                else if (Array.isArray(child)) {
                    child.forEach(function (c) {
                        if (typeof c === 'string') {
                            element.appendChild(new elementImpl_1.TextNodeLikeImpl(c));
                        }
                        else if (elementImpl_1.isNode(c)) {
                            element.appendChild(c);
                        }
                        else {
                            debug("Child is not a node or string: " + c + " , tag: " + tag);
                        }
                    });
                }
                else {
                    element.appendChild(new elementImpl_1.TextNodeLikeImpl(child));
                }
            });
            return element;
        },
        _renderConfig: undefined,
        render: function (el, config) {
            if (config === void 0) { config = {}; }
            return ("\n" + (config.renderClientCode ? "<sc" + '' + "ript>" + Module.getClientCode().map(function (c) { return c.code; }).join('\n') + "<" + '' + "/" + "script>" : "") + "\n" + el.render(config) + "\n").trim();
        },
        registerClientCode: function (f) {
            clientCode.push(f);
        },
        getClientCode: function () {
            return clientCode;
        },
    };
    var clientCode = [];
    exports.ReactLike = Module;
    //@ts-ignore
    exports.ReactLike = Module; // creates a global variable needed so emitted .js calls work. See tsconfig.json `"jsxFactory": "ReactLike.createElement",`
});
;
require(["createElement"], function(thisName){
    createElement_1 = thisName;
    createElement_2 = thisName;
});
;

// heads up - we want this file to be independent, that's why we didn't use misc utilities!
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
define("elementImpl", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // import * as RL from './createElement'
    function isReactLikeComponent(c) {
        return c.prototype && c.prototype.render;
    }
    exports.isReactLikeComponent = isReactLikeComponent;
    function isNode(n) {
        return isTextNodeLike(n) || isElementLike(n);
    }
    exports.isNode = isNode;
    function isElementLike(n) {
        return n && n.setAttribute;
    }
    exports.isElementLike = isElementLike;
    function isTextNodeLike(n) {
        return n && n.content && !isElementLike(n);
    }
    exports.isTextNodeLike = isTextNodeLike;
    var TextNodeLikeImpl = /** @class */ (function () {
        function TextNodeLikeImpl(content) {
            this.content = content;
        }
        TextNodeLikeImpl.prototype.render = function (config) {
            if (config === void 0) { config = defaultRenderConfig; }
            return "" + this.content;
        };
        return TextNodeLikeImpl;
    }());
    exports.TextNodeLikeImpl = TextNodeLikeImpl;
    // declare var ReactLike: ReactLike&{indent: any}
    var ElementLikeImpl = /** @class */ (function () {
        function ElementLikeImpl(tag) {
            this.tag = tag;
            this.attrs = {};
            this.children = [];
        }
        ElementLikeImpl.prototype.render = function (config) {
            var _this = this;
            if (config === void 0) { config = defaultRenderConfig; }
            var newLine = config.indent ? "\n" : "";
            var content = this.innerHtml ||
                "" + newLine + this.indent(__assign({}, config, { indentLevel: (config.indentLevel || 0) + 1 })) + this.children
                    .map(function (c) { return "" + c.render(__assign({}, config, { indentLevel: (config.indentLevel || 0) + 1 })); })
                    .join('') + newLine + this.indent(config);
            return "<" + this.tag + Object.keys(this.attrs).map(function (a) { return " " + a + "=\"" + _this.attrs[a] + "\""; }).join('') + ">" + content + "</" + this.tag + ">";
        };
        ElementLikeImpl.prototype.indent = function (config) {
            // return config.indent ? _indent(config.indentLevel || 0, config.indentTabSize || 2) : ''
            // const tabSize = config.indentTabSize || 2
            var L = (config.indentLevel || 0) * (config.indentTabSize || 2);
            var a = [];
            for (var i = 0; i < L; i++) {
                a.push(' ');
            }
            return a.join('');
        };
        ElementLikeImpl.prototype.setAttribute = function (name, value) {
            this.attrs[name] = value;
        };
        ElementLikeImpl.prototype.appendChild = function (c) {
            this.children.push(c);
            if (isElementLike(c)) {
                c.parentElement = this;
                // this.children.push(c)
            }
        };
        ElementLikeImpl.prototype.dangerouslySetInnerHTML = function (s) {
            this.innerHtml = s;
        };
        ElementLikeImpl.prototype.findDescendant = function (p) {
            var found;
            this.children.some(function (c) {
                if (isElementLike(c)) {
                    if (p(c)) {
                        found = c;
                    }
                    else {
                        found = c.findDescendant(p);
                    }
                }
                return !!found;
            });
            return found;
        };
        ElementLikeImpl.prototype.findAscendant = function (p) {
            if (this.parentElement) {
                if (p(this.parentElement)) {
                    return this.parentElement;
                }
                return this.parentElement.findAscendant(p);
            }
        };
        ElementLikeImpl.prototype.getAscendants = function () {
            return this.parentElement ? this.parentElement.getAscendants().concat([this.parentElement]) : [];
        };
        ElementLikeImpl.prototype.getRootAscendant = function () {
            var r = this.parentElement ? this.findAscendant(function (n) { return !n.parentElement; }) : this;
            return checkThrow(r, 'No root ascendant found in element like tree!');
        };
        ElementLikeImpl.prototype.getSiblings = function () {
            var _this = this;
            if (this.parentElement) {
                return this.parentElement.children.filter(function (c) { return c !== _this; });
            }
            return [];
        };
        ElementLikeImpl.prototype.findSibling = function (p) {
            return this.getSiblings().find(p);
        };
        ElementLikeImpl.prototype.find = function (p) {
            // TODO: this should start searching in the near children, sibling and parents, and only after that look on far nodes
            return this.getRootAscendant().findDescendant(p);
        };
        return ElementLikeImpl;
    }());
    exports.ElementLikeImpl = ElementLikeImpl;
    var defaultRenderConfig = { indentLevel: 0, indentTabSize: 2 };
    // heads up - we want this file to be independent, that's why we did't use misc utilities!
    // heads up - we want this file to be independent, that's why we did't use misc utilities!
    function checkThrow(r, msg) {
        if (msg === void 0) { msg = 'Throwing on undefined value'; }
        if (!r) {
            throw new Error(msg);
        }
        return r;
    }
});
// function _indent(i: number = 1, tabSize = 2): string {
//   const a=[]
//   for (let i = 0; i < i*tabSize; i++) {
//     a.push(' ')
//   }
//   return a.join('')
// }
;
require(["elementImpl"], function(thisName){
    elementImpl_1 = thisName;
    elementImpl_2 = thisName;
});
;

define("renderInHtml", ["require", "exports", "createElement"], function (require, exports, createElement_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    function renderInHTMLDocument(e) {
        return wrapInHtml(createElement_1.ReactLike.render(e, { indent: true, indentLevel: 1, renderClientCode: true }));
    }
    exports.renderInHTMLDocument = renderInHTMLDocument;
    function wrapInHtml(s) {
        return "\n  <!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\" />\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <title>title</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n</head>\n<body>\n" + s + "\n</body>\n</html>\n";
    }
    exports.wrapInHtml = wrapInHtml;
    /** sets innerHTML and calls children scripts if any */
    function setInnerHTML(elm, html) {
        elm.innerHTML = html;
        elm.querySelectorAll("script").forEach(function (el) {
            var newEl = document.createElement("script");
            el.getAttributeNames().forEach(function (attrName) {
                newEl.setAttribute(attrName, el.getAttribute(attrName));
            });
            newEl.appendChild(document.createTextNode(el.innerHTML));
            el.parentNode.replaceChild(newEl, el);
        });
    }
    exports.setInnerHTML = setInnerHTML;
    function renderInDOM(e, el, config) {
        if (typeof el === 'string') {
            var ell = document.querySelector(el);
            if (!ell) {
                throw 'Element not found ' + el;
            }
            setInnerHTML(ell, createElement_1.ReactLike.render(e, config));
        }
        else {
            setInnerHTML(el, createElement_1.ReactLike.render(e, config));
        }
    }
    exports.renderInDOM = renderInDOM;
});
;
require(["renderInHtml"], function(thisName){
    renderInHtml_1 = thisName;
    renderInHtml_2 = thisName;
});
;

define("misc", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // collections
    function array(n, sample) {
        var a = [];
        for (var i = 0; i < n; i++) {
            a.push(typeof sample === 'undefined' ? i : sample);
        }
        return a;
    }
    exports.array = array;
    function repeat(n, s) {
        return array(n, s).join('');
    }
    exports.repeat = repeat;
    function indent(i, tabSize) {
        if (i === void 0) { i = 1; }
        if (tabSize === void 0) { tabSize = 2; }
        return repeat(i * tabSize, ' ');
    }
    exports.indent = indent;
    function objectKeys(o) {
        return Object.keys(o);
    }
    exports.objectKeys = objectKeys;
    function checkThrow(r, msg) {
        if (msg === void 0) { msg = 'Throwing on undefined value'; }
        if (!r) {
            throw new Error(msg);
        }
        return r;
    }
    exports.checkThrow = checkThrow;
    function tryTo(f) {
        try {
            return f();
        }
        catch (error) {
        }
    }
    exports.tryTo = tryTo;
    var TypedMapImpl = /** @class */ (function () {
        function TypedMapImpl(props) {
            this.props = props;
        }
        TypedMapImpl.prototype.get = function (name) {
            return this.props[name];
        };
        TypedMapImpl.prototype.set = function (name, value) {
            this.props[name] = value;
        };
        return TypedMapImpl;
    }());
    exports.TypedMapImpl = TypedMapImpl;
    function printNativeError(error) {
        return (error && error.type) + ", " + (error && error.name) + "\nCause: " + (error && error.message) + "\nStack Trace:\n" + ((error.stack && Array.isArray(error.stack)) ? error.stack.map(function (s) { return repeat(2, ' ') + s; }).join('\n') : error.stack);
    }
    exports.printNativeError = printNativeError;
    // strings
    function escapeHtmlAttribute(code) {
        return code.replace(/\"/gmi, '&quot;');
    }
    exports.escapeHtmlAttribute = escapeHtmlAttribute;
    function unEscapeHtmlAttribute(code) {
        return code.replace(/\&quot\;/gmi, '"');
    }
    exports.unEscapeHtmlAttribute = unEscapeHtmlAttribute;
});
;
require(["misc"], function(thisName){
    misc_1 = thisName;
    misc_2 = thisName;
});
;
function Custom2(props) {
    return createElement_1.ReactLike.createElement("select", { multiple: true, onChange: function (e) {
            renderInHtml_1.renderInDOM(createElement_1.ReactLike.createElement(Custom1, { name: e.currentTarget.selectedOptions[0].value + '' }), '#b');
        } }, props.options.map(function (o) { return createElement_1.ReactLike.createElement("option", { value: o }, o); }));
};
function Custom1(props) {
    return createElement_1.ReactLike.createElement("div", null,
        createElement_1.ReactLike.createElement("div", { id: "b" }),
        createElement_1.ReactLike.createElement("button", { onClick: function (e) {
                renderInHtml_1.renderInDOM(createElement_1.ReactLike.createElement(Custom2, { options: misc_1.array(5).map(function (i) { return i * Math.random() + 1; }) }), '#a');
            } },
            "click me ",
            props.name),
        createElement_1.ReactLike.createElement("div", { id: "a" }));
}
</script>
<script></script>
<div>  <div id="b">      </div><button onClick="(function (e) {
                renderInHtml_1.renderInDOM(createElement_1.ReactLike.createElement(Custom2, { options: misc_1.array(5).map(function (i) { return i * Math.random() + 1; }) }), '#a');
            }).apply(this, arguments)">    click me seba  </button><div id="a">      </div></div>
</body>
</html>
